!function(){var e=document.currentScript.getAttribute("data-pixel-id");if(e){var t=document.currentScript.src.split("?")[0].replace(/\/pixel-tracker(?:-expanded)?\.(?:min\.)?js$/,"")+"/api/pixels/"+e+"/track",n=function(n,i){try{var o={eventType:n,pixelId:e,url:window.location.href,referrer:document.referrer,userAgent:navigator.userAgent,timestamp:Date.now(),data:i||{}};navigator.sendBeacon?navigator.sendBeacon(t,JSON.stringify(o)):fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o),keepalive:!0})}catch(e){console.error("HubPixel error:",e)}},i=Date.now(),o=!1;n("visit"),document.addEventListener("click",function(e){var t=e.target.closest("a[href], button");t&&n("click",{element:t.tagName,text:(t.textContent||"").substring(0,50),href:t.href||""})}),window.addEventListener("beforeunload",function(){n("exit")}),setTimeout(function(){o||(n("engagement",{timeOnPage:Date.now()-i}),o=!0)},3e4);var a=window.hubPixel=window.hubPixel||{};a.track=n,a.conversion=function(e){n("conversion",e)},a.sale=function(e){n("sale",e)},a.checkout=function(e){n("checkout",e)},a.trackForm=function(e,t){document.querySelectorAll(e).forEach(function(e){e.addEventListener("submit",function(i){n(t||"form_submit",{formId:e.id||"",formClass:e.className||"",action:e.action||""})})})},a.trackForm('form[action*="checkout"]',"checkout"),a.trackForm('form[action*="buy"]',"checkout"),a.trackForm('form[action*="purchase"]',"checkout")}}();